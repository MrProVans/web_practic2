{"version":3,"file":"weather-BO1LrArt.js","sources":["../../src/pages/Vanya/weather.js"],"sourcesContent":["import './weather.css'\r\n\r\nexport default function Weather() {\r\n    return `\r\n        <section class=\"weather-page\">\r\n            <div class=\"weather-widgets\">\r\n                <div class=\"card\">\r\n                    <h1 class=\"card_title\">Weather App</h1>\r\n                    <p class=\"card_date\">Today, <span id=\"date\"></span></p>\r\n                    <div class=\"card_search\">\r\n                        <input type=\"text\" class=\"card_input\" placeholder=\"Enter city name\" />\r\n                        <button id=\"searchBtn\" class=\"card_btn\">\r\n                            <span class=\"theme-icon\">üîç</span>\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"card_weather\">\r\n                        <h2 class=\"card_title card_title--city\" id=\"city\">New York</h2>\r\n                        <div class=\"card_block\">\r\n                            <h3 class=\"card_title card_title--temp\">22¬∞C</h3>\r\n                            <img src=\"\" class=\"card_weather-icon\" alt=\"Weather Icon\">\r\n                        </div>\r\n                        <div class=\"weather-details\">\r\n                            <div class=\"detail-item\">\r\n                                <i class=\"fa-solid fa-droplet\"></i>\r\n                                <span id=\"humidity\">50%</span>\r\n                            </div>\r\n                            <div class=\"detail-item\">\r\n                                <i class=\"fa-solid fa-wind\"></i>\r\n                                <span id=\"wind\">15 m/s</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <p id=\"error-message\" class=\"error-message\" style=\"display: none;\">–ù–µ —Å–º–æ–≥–ª–∏ –Ω–∞–π—Ç–∏ —ç—Ç–æ—Ç –≥–æ—Ä–æ–¥</p>\r\n                </div>\r\n                <div class=\"forecast-card\" id=\"forecast-card\">\r\n                    <h1 class=\"forecast-title\">5-Day Forecast</h1>\r\n                    <div class=\"forecast-container\" id=\"forecast\"></div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    `\r\n}\r\n\r\nWeather.init = function() {\r\n    const apiKey = '89c563ae16caa06090600ce6b5abf65a'\r\n    const card = document.querySelector('.card')\r\n    const searchBox = document.querySelector('.card_input')\r\n    const searchBtn = document.getElementById('searchBtn')\r\n    const temp = document.querySelector('.card_title--temp')\r\n    const city = document.querySelector('.card_title--city')\r\n    const icon = document.querySelector('.card_weather-icon')\r\n    const date = document.getElementById('date')\r\n    const forecastContainer = document.getElementById('forecast')\r\n    const forecastCard = document.getElementById('forecast-card')\r\n    const errorMessage = document.getElementById('error-message')\r\n    const humidity = document.getElementById('humidity')\r\n    const wind = document.getElementById('wind')\r\n    function resetWeatherData() {\r\n        city.innerHTML = 'New York'\r\n        temp.innerHTML = '22¬∞C'\r\n        icon.src = ''\r\n        humidity.innerHTML = '50%'\r\n        wind.innerHTML = '15 m/s'\r\n    }\r\n\r\n    const showDate = () => {\r\n        const now = new Date()\r\n        const day = now.getDate()\r\n        const monthName = now.toLocaleString('en', { month: 'long' })\r\n        date.innerHTML = `${day} ${monthName}`\r\n    }\r\n\r\n    async function getWeather(cityName) {\r\n        cityName = cityName.trim()\r\n        if (!cityName) return\r\n        try {\r\n            errorMessage.style.display = 'none'\r\n            const response = await fetch(\r\n                `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${apiKey}&units=metric`\r\n            )\r\n            if (!response.ok) throw new Error('City not found')\r\n            const result = await response.json()\r\n            card.classList.add('active')\r\n            card.style.height = 'auto'\r\n            icon.src = `https://openweathermap.org/img/wn/${result.weather[0].icon}@2x.png`\r\n            city.innerHTML = result.name\r\n            temp.innerHTML = `${Math.round(result.main.temp)}¬∞C`\r\n            humidity.innerHTML = `${result.main.humidity}%`\r\n            wind.innerHTML = `${result.wind.speed} m/s`\r\n            const forecastResponse = await fetch(\r\n                `https://api.openweathermap.org/data/2.5/forecast?lat=${result.coord.lat}&lon=${result.coord.lon}&appid=${apiKey}&units=metric`\r\n            )\r\n            if (!forecastResponse.ok) throw new Error('Forecast not found')\r\n\r\n            const forecastResult = await forecastResponse.json()\r\n            renderForecast(forecastResult)\r\n            forecastCard.style.display = 'block'\r\n            setTimeout(() => {\r\n                card.classList.add('move-left')\r\n                forecastCard.classList.add('move-right')\r\n            }, 10)\r\n        } catch (err) {\r\n            errorMessage.textContent = '–ù–µ —Å–º–æ–≥–ª–∏ –Ω–∞–π—Ç–∏ —ç—Ç–æ—Ç –≥–æ—Ä–æ–¥'\r\n            errorMessage.style.display = 'block'\r\n            card.classList.remove('active')\r\n            card.style.height = '230px'\r\n            resetWeatherData()\r\n            forecastContainer.innerHTML = ''\r\n            forecastCard.style.display = 'none'\r\n            card.classList.remove('move-left')\r\n            forecastCard.classList.remove('move-right')\r\n        }\r\n    }\r\n\r\n    function renderForecast(data) {\r\n        forecastContainer.innerHTML = ''\r\n\r\n        const dailyForecasts = {}\r\n        data.list.forEach(item => {\r\n            const date = item.dt_txt.split(' ')[0]\r\n            if (!dailyForecasts[date]) dailyForecasts[date] = []\r\n            dailyForecasts[date].push(item)\r\n        })\r\n\r\n        const days = Object.keys(dailyForecasts).slice(1, 6) // Next 5 days\r\n\r\n        days.forEach(date => {\r\n            const dayData = dailyForecasts[date][0] // First entry\r\n            const dateObj = new Date(dayData.dt * 1000)\r\n            const dayName = dateObj.toLocaleString('en', { weekday: 'short' })\r\n\r\n            const forecastItem = document.createElement('div')\r\n            forecastItem.className = 'forecast-item'\r\n            forecastItem.innerHTML = `\r\n                <p>${dayName}</p>\r\n                <img src=\"https://openweathermap.org/img/wn/${dayData.weather[0].icon}@2x.png\" alt=\"Forecast Icon\">\r\n                <p>${Math.round(dayData.main.temp)}¬∞C</p>\r\n            `\r\n            forecastContainer.appendChild(forecastItem)\r\n        })\r\n    }\r\n\r\n    searchBtn.addEventListener('click', () => getWeather(searchBox.value))\r\n    searchBox.addEventListener('keypress', (e) => {\r\n        if (e.key === 'Enter') getWeather(searchBox.value)\r\n    })\r\n\r\n    document.addEventListener('click', (e) => {\r\n        if (card.classList.contains('active') && !card.contains(e.target) && !forecastCard.contains(e.target)) {\r\n            resetWeatherData();\r\n\r\n            card.classList.remove('active')\r\n            card.style.height = '230px'\r\n            searchBox.value = ''\r\n            forecastContainer.innerHTML = ''\r\n            errorMessage.style.display = 'none'\r\n\r\n            card.classList.remove('move-left')\r\n            forecastCard.classList.remove('move-right')\r\n            setTimeout(() => {\r\n                forecastCard.style.display = 'none'\r\n            }, 300)\r\n        }\r\n    })\r\n\r\n    showDate()\r\n}"],"names":["Weather","apiKey","card","searchBox","searchBtn","temp","city","icon","date","forecastContainer","forecastCard","errorMessage","humidity","wind","resetWeatherData","showDate","now","day","monthName","getWeather","cityName","response","result","forecastResponse","forecastResult","renderForecast","data","dailyForecasts","item","dayData","dayName","forecastItem"],"mappings":"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"}